import{_ as t,c as l,a,d as h,e as i,b as r,w as p,r as d,o as k}from"./app-rzor12pK.js";const c="/assets/file-20241022210228-BcaQUdiQ.png",o="/assets/file-20241022211215-CZH6aBZO.png",n="/assets/file-20241022214237-Df_TLfzI.png",g="/assets/file-20241022215507-BqH7a3Ba.png",m="/assets/file-20241022215957-IprfVai8.png",u="/assets/file-20241022220651-pdqr2FRI.png",v="/assets/file-20241022220846-lR_lL7GD.png",b={};function y(A,s){const e=d("RouteLink");return k(),l("div",null,[s[3]||(s[3]=a('<p><img src="'+c+'" alt=""></p><p>本部分讨论一些常见的网络服务和错误配置导致的安全漏洞</p><h2 id="了解smb" tabindex="-1"><a class="header-anchor" href="#了解smb"><span>了解SMB</span></a></h2><p><strong>SMB</strong> ( Server Message Block) 服务器消息块协议</p><ul><li>是一种 <strong>(client-server)</strong> 通信协议，用于共享网络上的文件、打印机、串行端口和其他资源的访问。<a href="https://searchnetworking.techtarget.com/definition/Server-Message-Block-Protocol" target="_blank" rel="noopener noreferrer">来源</a></li><li>SMB 协议被称为响应请求协议 <strong>(response-request protocol)</strong>，它在客户端和服务器之间传输多个消息以建立连接。</li><li>客户端使用 TCP/IP（实际上是 RFC1001 和 RFC1002 中指定的 TCP/IP 上的 NetBIOS）、NetBEUI 或 IPX/SPX 连接到服务器。</li><li>建立连接后，客户端可以向服务器发送命令 (SMB)。允许客户端执行您想要对文件系统执行的所有操作。</li><li>所有操作都是通过网络完成的。</li><li>自Windows 95以来，Microsoft Windows操作系统为Unix系统提供的开源服务，用于共享文件。 -  <img src="'+o+'" alt=""></li></ul><h3 id="回答以下问题" tabindex="-1"><a class="header-anchor" href="#回答以下问题"><span>回答以下问题</span></a></h3><details class="hint-container details"><summary>SMB代表什么？</summary><p><strong>答案：</strong> <code>Server Message Block</code></p></details><details class="hint-container details"><summary>SMB是什么类型的协议？</summary><p><strong>答案：</strong> <code>response-request</code></p></details><details class="hint-container details"><summary>客户端使用什么连接到服务器</summary><p><strong>答案：</strong> <code>TCP/IP</code></p></details><details class="hint-container details"><summary>SMB运行在什么系统上</summary><p><strong>答案：</strong> <code>Unix</code></p></details><h2 id="枚举smb" tabindex="-1"><a class="header-anchor" href="#枚举smb"><span>枚举SMB</span></a></h2><p>枚举 <strong>(Enumeration)</strong> 是收集目标信息的过程，目的是找到潜在的攻击媒介并帮助利用。</p><p>这个过程对于攻击成功至关重要，因为浪费时间利用不起作用或可能使系统崩溃的漏洞可能是浪费能量。枚举可用于收集用户名、密码、网络信息、主机名、应用程序数据、服务或对攻击者可能有价值的任何其他信息。</p><p><strong>SMB通常是攻击者寻找发现敏感信息的绝佳起点</strong> 如果服务器上有SMB共享驱动器，通常可以连接到并用于查看或传输文件。</p><h3 id="端口扫描" tabindex="-1"><a class="header-anchor" href="#端口扫描"><span>端口扫描</span></a></h3>',15)),h("p",null,[s[1]||(s[1]=i("枚举的第一步是进行端口扫描，尽可能多地了解目标机器的服务、应用程序、结构和操作系统。我们可以通过")),r(e,{to:"/notes/penetration/1.tryhackme/5.Network_NMAP.html"},{default:p(()=>s[0]||(s[0]=[i("NMAP")])),_:1}),s[2]||(s[2]=i("工具进行扫描。"))]),s[4]||(s[4]=a('<h3 id="enum4linux" tabindex="-1"><a class="header-anchor" href="#enum4linux"><span>Enum4linux</span></a></h3><p>Enum4linux是一个用于枚举Windows和Linux系统上的SMB共享的工具。它基本上是samba包中工具的包装器，可以轻松地从目标中快速提取与SMB有关的信息。它已经安装在AttackBox上，但是如果你需要在自己的攻击机器上安装它，你可以从官方<a href="https://github.com/portcullislabs/enum4linux" target="_blank" rel="noopener noreferrer">github</a>上安装。</p><p><strong>使用</strong></p><p>语法： <code>Enum4linux [options] ip</code></p><table><thead><tr><th>options</th><th>解释</th></tr></thead><tbody><tr><td>-U</td><td>获取用户列表</td></tr><tr><td>-M</td><td>获取机器（machine）列表</td></tr><tr><td>-N</td><td>获取命名空间转储</td></tr><tr><td>-S</td><td>获取共享列表</td></tr><tr><td>-P</td><td>获取密码策略信息</td></tr><tr><td>-G</td><td>获取组和成员列表</td></tr><tr><td>-a</td><td>所有上述（完整的基本枚举)</td></tr></tbody></table><h3 id="回答下面问题" tabindex="-1"><a class="header-anchor" href="#回答下面问题"><span><strong>回答下面问题</strong></span></a></h3><details class="hint-container details"><summary><strong>Task-1：</strong> 使用nmap 扫描，发现有多少端口是开放的？</summary><p><strong>答案</strong>：3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nmap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sS</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sV</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.75.224</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+n+'" alt=""></p></details><details class="hint-container details"><summary><strong>Task-2：</strong> SMB在什么端口上运行?</summary><p><strong>答案</strong>：139/4458</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nmap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sS</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sV</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.10.75.224</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+n+'" alt=""></p></details><details class="hint-container details"><summary><strong>Task-3</strong> 使用<code>Enum4Linux</code>,进行完整的枚举，对于新使用者，他们的名字是什么 ？</summary><p><strong>答案</strong>：<code>workgroup</code></p><p><img src="'+g+'" alt=""></p><p><strong>解析:</strong></p><p>SMB 协议默认全局配置的预设工作组名称为Workgoup,所有匿名登陆的人，都会叫这个名字。 <img src="'+m+`" alt=""></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span></span></span>
<span class="line"><span>\`\`\`ad-details</span></span>
<span class="line"><span>collapse: true </span></span>
<span class="line"><span>title:**Task-4** 机器的名字？</span></span>
<span class="line"><span></span></span>
<span class="line"><span>**答案**：POLOSMB</span></span>
<span class="line"><span></span></span>
<span class="line"><span>![](assets/7.network_smb/file-20241022220220.png)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary><strong>Task-5</strong> 操作系统版本？</summary><p><strong>答案</strong>：6.1</p><p><img src="`+u+'" alt=""></p></details><details class="hint-container details"><summary><strong>Task-6</strong> 我们需要调查？</summary><p><strong>答案</strong>：profiles</p><p><strong>解析：</strong></p><p><strong>这里问的是我们接下来要关注的是哪个目录</strong><img src="'+v+`" alt=""></p><p>从<code>Share Enumeration（共享枚举）</code> 中可以看到有一个目录是连接成功（<code>OK</code>）的，因此我们接下来要重点关注。</p></details><h2 id="smb利用" tabindex="-1"><a class="header-anchor" href="#smb利用"><span>SMB利用</span></a></h2><p>虽然SMB存在漏洞(如<a href="https://www.cvedetails.com/cve/CVE-2017-7494/" target="_blank" rel="noopener noreferrer">CVE-2017 - 7494</a>)可以通过利用SMB允许远程代码执行。但遇到更多的是由于系统错误配置导致您可以轻松进入系统。</p><p>在这个例子中，将利用匿名 <a href="#%e4%ba%86%e8%a7%a3smb">SMB</a> <strong>共享访问</strong>的错误配置，获取远程shell权限。在正式开始之前，我们要知道我们需要哪些工具和信息：</p><h3 id="smb共享" tabindex="-1"><a class="header-anchor" href="#smb共享"><span>SMB共享</span></a></h3><p>在枚举阶段我们应该获取到以下信息：</p><ul><li>SMB 共享的位置</li><li>SMB的共享名称</li></ul><h3 id="smbclient" tabindex="-1"><a class="header-anchor" href="#smbclient"><span>SMBClient</span></a></h3><p>我们需要一个<code>SMBclient</code>(SMB 客户端)来访问服务器上的 <a href="#%e4%ba%86%e8%a7%a3smb">SMB</a> 共享资源。如果您的机器没有安装可以参考<a href="https://www.samba.org/samba/docs/current/man-html/smbclient.1.html" target="_blank" rel="noopener noreferrer">此文档</a>。我们可以使用以下语法远程访问<code>SMB</code>共享。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smbclient</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> //[ip]/[share]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后是tags：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>- U [name]: 指定用户名</span></span>
<span class="line"><span>- p [port]: 指定端口</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>明白了吧，OKay，让我们开始吧！</strong></p><h3 id="开始练习" tabindex="-1"><a class="header-anchor" href="#开始练习"><span>开始练习</span></a></h3><p>让我们回答以下问题：</p><details class="hint-container details"><summary>以用户名<code>suit</code> 访问 IP 为10.10.10.2的计算机上的SMB服务默认端口上的共享文件<code>secret</code>的正确语法是什么？</summary><p><strong>答案：</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smbclient</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> //10.10.10.2/secret</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -U</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> suit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 445</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></details><p>好极了！现在您已经掌握了语法的窍门，让我们尝试利用匿名用户漏洞，首先要看看我们感兴趣的共享是否配置运行匿名用户访问：</p><blockquote><p>[!TIP] 匿名访问 匿名访问不需要身份验证即可查看文件：</p><ul><li>使用用户名：<code>Anonymous</code></li><li>连接到在枚举阶段找到的共享</li><li>不需要提供密码</li></ul></blockquote><details class="hint-container details"><summary>details 共享是否允许匿名访问 <strong>Y/N</strong> ?</summary><p><strong>答案</strong>：<code>Y</code></p><p><strong>解析：</strong> 我们可以在不提供密码的情况下进行连接，这证明网络共享允许匿名访问：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$smbclient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> //10.10.187.207/profiles -p 445</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">WARNING:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">syslog</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> option</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> deprecated</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WORKGROUP</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">oot</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s password:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Try &quot;help&quot; to get a list of possible commands.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">smb: \\&gt; ls</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .                                   D        0  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  ..                                  D        0  Tue Apr 21 11:49:56 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .cache                             DH        0  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .profile                            H      807  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .sudo_as_admin_successful           H        0  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .bash_logout                        H      220  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .viminfo                            H      947  Tue Apr 21 12:08:23 2020</span></span>
<span class="line highlighted"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Working From Home Information.txt      N      358  Tue Apr 21 12:08:23 2020</span></span>
<span class="line highlighted"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .ssh                               DH        0  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .bashrc                             H     3771  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  .gnupg                             DH        0  Tue Apr 21 12:08:23 2020</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">		12316808 blocks of size 1024. 7584044 blocks available</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">smb: \\&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>好极了!看看周围的任何有趣的文件，可能包含有价值的信息。我们可以假设这个档案夹是谁的？</summary><p><strong>答案</strong>: <code>John Cactus</code> 让我们下载有趣的文档：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smb:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Working From Home Information.txt</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\W</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">orking</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> From</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Information.txt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 358</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Working</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> From</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Home</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Information.txt</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1.8 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">KiloBytes/sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">) (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">average</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1.8</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiloBytes/sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smb:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，让我们看看文档包含什么：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Working</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">From</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Home</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Information.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>John Cactus,</span></span>
<span class="line"><span></span></span>
<span class="line"><span>As you&#39;re well aware, due to the current pandemic most of POLO inc. has insisted that, wherever</span></span>
<span class="line highlighted"><span>possible, employees should work from home. As such- your account has now been enabled with ssh</span></span>
<span class="line"><span>access to the main server.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>If there are any problems, please contact the IT department at it@polointernalcoms.uk</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Regards,</span></span>
<span class="line"><span></span></span>
<span class="line"><span>James</span></span>
<span class="line"><span>Department Manager</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>配置了什么服务允许他在家工作？</summary><p><strong>答案</strong>：<code>ssh</code></p></details><details class="hint-container details"><summary>好的，我会的现在我们知道了这一点，我们应该在共享上的哪个目录中查找？</summary><p><strong>答案</strong>：<code>.ssh</code></p></details><details class="hint-container details"><summary>此目录包含允许用户在服务器上进行身份验证并随后访问服务器的身份验证密钥。这些钥匙中哪一个对我们最有用？</summary><p><strong>答案</strong>：<code>id_rsa</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smb:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .ssh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">smb:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ls</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  .</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   D</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Tue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:08:23</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  ..</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                  D</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Tue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:08:23</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  id_rsa</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                              A</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1679</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Tue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:08:23</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  id_rsa.pub</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                          N</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      396</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Tue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:08:23</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  authorized_keys</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     N</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Tue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:08:23</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2020</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>将此文件下载到本地计算机，并使用“chmod 600 [<code>file</code>]&quot;将权限更改为“600”。 现在，使用您已经收集的信息来计算帐户的用户名。然后，使用服务和密钥登录到服务器。</p><details class="hint-container details"><summary>What is the smb.txt flag?</summary><p><strong>答案</strong>：<code>THM{smb_is_fun_eh?}</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id_rsa</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 600</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id_rsa</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  $chmod</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 600</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id_rosa</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id_rsa</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cactus@10.10.187.207</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> smb.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">THM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{smb_is_fun_eh?}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,35))])}const f=t(b,[["render",y]]),C=JSON.parse('{"path":"/penetration/eto2hu0f/","title":"常见的网络服务-SMB","lang":"zh-CN","frontmatter":{"title":"常见的网络服务-SMB","createTime":"2024/11/16 19:34:46","permalink":"/penetration/eto2hu0f/"},"headers":[],"readingTime":{"minutes":6.74,"words":2021},"git":{"updatedTime":1732288003000,"contributors":[{"name":"suxiufeng","username":"suxiufeng","email":"suxiufengcool@163.com","commits":3,"avatar":"https://avatars.githubusercontent.com/suxiufeng?v=4","url":"https://github.com/suxiufeng"},{"name":"suxiuf","username":"suxiuf","email":"suxiufengcool@163.com","commits":1,"avatar":"https://avatars.githubusercontent.com/suxiuf?v=4","url":"https://github.com/suxiuf"},{"name":"kali","username":"kali","email":"kali@kali","commits":1,"avatar":"https://avatars.githubusercontent.com/kali?v=4","url":"https://github.com/kali"}]},"filePathRelative":"notes/penetration/1.tryhackme/7.Network_SMB.md"}');export{f as comp,C as data};
